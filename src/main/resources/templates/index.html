<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>CF Repave Stats</title>
    <link rel="stylesheet" th:href="@{/css/styles.css}"/>
</head>
<body>
<div class="app">
    <header class="header">
        <div class="header-left">
            <h1>CF Repave Stats</h1>
            <span class="status-indicator" id="statusIndicator">
                <span class="pulse"></span>
                <span class="status-text">Connected</span>
            </span>
        </div>
        <div class="header-right">
            <button class="btn-refresh" id="manualRefresh" title="Manual Refresh">Refresh</button>
            <span class="divider"></span>
            <label class="auto-refresh-toggle">
                <input type="checkbox" id="autoRefreshToggle"/>
                <span class="toggle-label">Auto Refresh</span>
            </label>
            <select id="refreshInterval">
                <option value="5000" selected>5s</option>
                <option value="10000">10s</option>
                <option value="15000">15s</option>
                <option value="30000">30s</option>
            </select>
        </div>
    </header>

    <nav class="tabs">
        <button class="tab active" data-tab="instance">Instance Info</button>
        <button class="tab" data-tab="services">Service Bindings</button>
    </nav>

    <main>
        <section class="tab-content active" id="tab-instance">
            <div class="app-stats" id="appStats">
                <div class="stat-item">
                    <span class="stat-label">Instances Seen</span>
                    <span class="stat-value" id="statInstances">-</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">Memory Allocated</span>
                    <span class="stat-value" id="statMemLimit">-</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">Memory Used</span>
                    <span class="stat-value" id="statMemUsed">-</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">Disk Allocated</span>
                    <span class="stat-value" id="statDiskLimit">-</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">Disk Used</span>
                    <span class="stat-value" id="statDiskUsed">-</span>
                </div>
            </div>

            <div class="instance-overview">
                <div class="instance-badge" id="instanceBadge">
                    <span class="badge-index" id="badgeIndex">-</span>
                    <span class="badge-label">Instance</span>
                </div>
                <div class="instance-details">
                    <div class="detail-grid">
                        <div class="detail-item">
                            <span class="detail-label">Instance GUID</span>
                            <span class="detail-value" id="instanceId">-</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">Diego Cell IP</span>
                            <span class="detail-value" id="instanceIp">-</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">Port</span>
                            <span class="detail-value" id="instancePort">-</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">Uptime</span>
                            <span class="detail-value" id="uptime">-</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">App Name</span>
                            <span class="detail-value" id="appName">-</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">App ID</span>
                            <span class="detail-value" id="appId">-</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="history-section">
                <div class="history-header">
                    <h2>Response History</h2>
                    <div class="instance-filter">
                        <label for="instanceFilter">Filter Instance:</label>
                        <select id="instanceFilter">
                            <option value="all" selected>All Instances</option>
                        </select>
                        <button class="btn-clear-filter" id="clearFilter" title="Clear filter" style="display:none;">Clear</button>
                    </div>
                </div>
                <table class="history-table">
                    <thead>
                        <tr>
                            <th>Timestamp</th>
                            <th>Instance</th>
                            <th>GUID</th>
                            <th>Cell IP</th>
                            <th>Uptime</th>
                        </tr>
                    </thead>
                    <tbody id="historyBody">
                    </tbody>
                </table>
            </div>
        </section>

        <section class="tab-content" id="tab-services">
            <div class="services-grid" id="servicesGrid">
                <p class="no-services">Loading services...</p>
            </div>
        </section>
    </main>
</div>

<script th:src="@{/js/dashboard.js}"></script>
</body>
</html>
